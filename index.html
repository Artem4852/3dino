<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <title>Dino game</title>
</head>
<body>
    <a-scene id="scene">
        <a-assets>
            <a-asset-item id="cactus_small_1_obj" src="assets/cactus_small_1.obj"></a-asset-item>
            <a-asset-item id="cactus_small_1_mtl" src="assets/cactus_small_1.mtl"></a-asset-item>
            <a-asset-item id="cactus_small_2_obj" src="assets/cactus_small_2.obj"></a-asset-item>
            <a-asset-item id="cactus_small_2_mtl" src="assets/cactus_small_2.mtl"></a-asset-item>
            <a-asset-item id="cactus_big_1_obj" src="assets/cactus_big_1.obj"></a-asset-item>
            <a-asset-item id="cactus_big_1_mtl" src="assets/cactus_big_1.mtl"></a-asset-item>
            <a-asset-item id="cactus_big_2_obj" src="assets/cactus_big_2.obj"></a-asset-item>
            <a-asset-item id="cactus_big_2_mtl" src="assets/cactus_big_2.mtl"></a-asset-item>
            <a-asset-item id="cactus_big_3_obj" src="assets/cactus_big_3.obj"></a-asset-item>
            <a-asset-item id="cactus_big_3_mtl" src="assets/cactus_big_3.mtl"></a-asset-item>
            <a-asset-item id="floor_1_obj" src="assets/floor_1.obj"></a-asset-item>
            <a-asset-item id="floor_1_mtl" src="assets/floor_1.mtl"></a-asset-item>
            <a-asset-item id="floor_2_obj" src="assets/floor_2.obj"></a-asset-item>
            <a-asset-item id="floor_2_mtl" src="assets/floor_2.mtl"></a-asset-item>
            <a-asset-item id="floor_3_obj" src="assets/floor_3.obj"></a-asset-item>
            <a-asset-item id="floor_3_mtl" src="assets/floor_3.mtl"></a-asset-item>
            <a-asset-item id="floor_4_obj" src="assets/floor_4.obj"></a-asset-item>
            <a-asset-item id="floor_4_mtl" src="assets/floor_4.mtl"></a-asset-item>
        </a-assets>

        <a-box position="0 3 20" color="blue"></a-box>
        <a-box position="0 3 -50"  color="blue"></a-box>
        <a-box position="0 3 50"  color="blue"></a-box>
        <a-entity id="camera" camera look-controls wasd-controls position="0 3 0"></a-entity>
        <!-- <a-entity id="camera" camera look-controls custom-wasd-controls position="0 3 20"></a-entity> -->

        <!-- <a-obj-model class="floor" get-dimensions src="#floor_1_obj" mtl="#floor_1_mtl" position="0 -1 0" rotation="0 0 0" scale="0.7 0.7 0.7"></a-obj-model> -->
    </a-scene>

    <script>
        // AFRAME.registerComponent('custom-wasd-controls', {
        //     init: function () {
        //         this.el.addEventListener('keydown', (event) => {
        //             if (['w', 'a', 's', 'd'].includes(event.key.toLowerCase())) {
        //                 event.preventDefault();
        //             }
        //         });
        //     }
        // });

        // The best way I could think of to get dimensions of the floor...
        AFRAME.registerComponent('get-dimensions', {
            init: function () {
                this.el.addEventListener('model-loaded', () => {
                    const mesh = this.el.getObject3D('mesh');
                    if (mesh) {
                        const box = new THREE.Box3().setFromObject(mesh);
                        const size = box.getSize(new THREE.Vector3());

                        console.log('Dimensions:', size);

                        const position = this.el.object3D.position;
                        const endX = position.x + size.x * this.el.object3D.scale.x / 2;
                        console.log('End X position:', endX);
                    }
                });
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>